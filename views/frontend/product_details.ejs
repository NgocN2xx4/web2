<!DOCTYPE html>
<html>
<head>
   <base href="/public">
   <%- include('css') %>
   <script src="dist/sweetalert.min.js"></script>
<link rel="stylesheet" type="text/css" href="dist/sweetalert.css">
   <style>
      .evaluate{
         margin-left: 20px; 
         border-left: solid #dad7d7 1px; 
         font-size: 13pt; 
         padding-top: 3px; 
         padding-left: 20px;
      }
      .btnAdd{
         margin-top: 20px; 
         width: 100%; 
         font-size: 30px;
      }
      .card-inner {
        margin-left: 4rem;
      }

      .img-account-profile {
        height: 10rem;
        border: 1px solid #000;
        border-radius: 50%;
        height: 150px;
        width: 150px;
      }
      @media(max-width:380px) {
         .fillComment {
            height: 10px;
            width: 70vw;
         }

         .allComment {
            padding-left: 20%;
            font-size: 20px;
         }
         .evaluate{
            margin-left: 5px;
            font-size: 9pt;
            padding-left: 6px;
         }
         .bi-star-fill, .fa-star{
            height: 12px;
            width: 12px;
         }
         .btnAdd{
            font-size:20px;
         }
         .img-account-profile{
            height: 100px;
            width: 100px;
         }
         p strong{
            font-size: 15px;
         }
         .card-inner {
            margin-left: 2rem;
         }
      }
   </style>
</head>

<body>
   <div class="hero_area">
    <%- include('header') %>

      <section class="product_section layout_padding">
         <div class="container">
            <div class="row">
               <div class="col-md-6 text-center">
                  <div class="border rounded-4 mb-3 d-flex justify-content-center">
                       <img style="max-width: 100%; max-height: 60vh; margin: auto;" class="rounded-4 fit" src="<%= product.image %>" />
                   </div>
               </div>
               <div class="col-md-6">
                  <h3><%= product.title %></h3>
                  <!-- show 5 stars -->
                  <ul style="display: flex; list-style-type: none; margin: 0px; padding: 0px;">
                     <li style="color: orange; font-size: 13pt; padding-top: 2px; margin-right: 5px;" class="evaluate">5.0</li>
                     <% for(let i = 0; i <5 ; i++) { %>
                     <li style="color: orange; padding: 2px;">
                              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                 class="bi bi-star-fill" viewBox="0 0 16 16">
                                 <path
                                    d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z">
                                 </path>
                              </svg>
                    </li>
                     <% } %>

                     <li class="evaluate">
                        <%= replies.length+comments.length%> ƒê√°nh gi√°
                     </li>
                     <li class="evaluate">
                        <%= orders.length%> ƒê√£ b√°n
                     </li>
                  </ul>
                  <p style="color: red; font-size: 30px; margin-top: 15px; margin-bottom: 15px;">
                    <%= (product.discount_price > 0) ? numberFormat(product.discount_price) : numberFormat(product.price) %> VNDC</p>
                  <p
                     style="color: grey; font-size: 15px; margin-top: 15px; margin-bottom: 15px; text-decoration: line-through;">
                     <del><%= numberFormat(product.price) %> VNDC</del>
                  </p>
                  <div class="d-flex flex-container">
                     <form id="quantity-form" style="display:inline-block;" action="/add_cart/<%= product._id%>" method="POST" ></form>
                     <div>
                        <button class="btn btn-light" style="border: 1px solid #e0dede; border-radius: 0px;"
                           onclick="addMoreCart(-1)">-</button>
                     </div>
                     <div>
                           <input type="number" name="quantity" class="form-control" step=1 value="1" style="max-width:70px; 
            border: 1px solid #e0dede; border-radius: 0px; text-align: center;" onchange="fixCartNum()">
                     </div>
                     <div>
                        <button class="btn btn-light" style="border: 1px solid #e0dede; border-radius: 0px;"
                           onclick="addMoreCart(1)">+</button>
                     </div>
                     <div>
                        <p style="margin: 8px 0px 10px 10px;"><strong>Number</strong>: <% if(product.quantity > 0) { %> <%= product.quantity%> products <% }else { %><label style="color: red; font-weight: 500;">Out of stock</label><%}%></p>
                    </div>
                  </div>
                  <button class="btn btn-success btnAdd" 
                        <% if(token != null) { %>
                        data-product-quantity="<%= product.quantity %>" onclick="handleAddToCart(this)">
                        <% } else { %>
                        onclick="checkToken()">
                        <% } %>
                     <i class="bi bi-cart4"></i> Th√™m v√†o gi·ªè h√†ng
                  </button>
                  </form>
                     <button class="btn btn-secondary btnAdd" disabled
                     style="background: #edebeb; border: none; color: #000;">
                     <i class="bi bi-bookmark-heart-fill"></i> ƒê√£ y√™u th√≠ch</button>
               </div>
               <div class="col-md-12" style="margin-top: 50px;">
                  <h4>M√¥ t·∫£ s·∫£n ph·∫©m</h4>
                  <div style="text-align: center; padding: 20px; background-color: #fff; border: 2px solid #d4af37; border-radius: 10px;">
        <h1 style="color: #d4af37; font-size: 28px; text-transform: uppercase;">‚ú® M√¥ T·∫£ S·∫£n Ph·∫©m ‚ú®</h1>
        <p style="font-size: 16px; line-height: 1.6;">
            <b>L∆∞u √Ω:</b> V√≤ng l√† <b>b·∫°c 999 th·∫≠t</b>, ƒë·∫∑c l√≤ng n·∫∑ng t·ª´ <b>30-33g</b> nh∆∞ cam k·∫øt. T√πy theo size tay (54, 56, 58, 60).
        </p>

        <h2 style="color: #2e8b57; font-size: 22px; margin-top: 20px;">Ki·ªÅng C√° Koi Hoa Sen üå∏üêü</h2>
        <p style="font-size: 16px; line-height: 1.6;">
            Bi·ªÉu t∆∞·ª£ng c·ªßa <b>t√†i l·ªôc, s·ª©c kh·ªèe v√† may m·∫Øn</b>. <br>
            üêü <b>C√° Koi</b>: ƒê·∫°i di·ªán cho s·ª± n·ªó l·ª±c b·ªÅn b·ªâ, v∆∞·ª£t m·ªçi th·ª≠ th√°ch ƒë·ªÉ v∆∞∆°n t·ªõi th√†nh c√¥ng. <br>
            üå∏ <b>Hoa Sen</b>: T∆∞·ª£ng tr∆∞ng cho s·ª± thanh l·ªçc, b√¨nh an v√† s·ª©c s·ªëng m·∫°nh m·∫Ω t·ª´ b√™n trong.
        </p>
        <p style="font-size: 16px; line-height: 1.6;">
            S·ª± k·∫øt h·ª£p gi·ªØa hai h√¨nh t∆∞·ª£ng n√†y tr√™n n·ªÅn <b>b·∫°c cao c·∫•p</b> kh√¥ng ch·ªâ t·∫°o n√™n m·ªôt thi·∫øt k·∫ø trang s·ª©c tinh t·∫ø, m√† c√≤n l√† <b>v·∫≠t ph·∫©m phong th·ªßy h·ªô th√¢n</b> ‚Äì mang l·∫°i <b>nƒÉng l∆∞·ª£ng t√≠ch c·ª±c</b> cho ng∆∞·ªùi ƒëeo trong c√¥ng vi·ªác, s·ª©c kh·ªèe v√† cu·ªôc s·ªëng.
        </p>

        <h3 style="color: #333; font-size: 20px; margin-top: 20px;">Th√¥ng Tin S·∫£n Ph·∫©m</h3>
        <table style="width: 100%; border-collapse: collapse; margin: 20px 0; font-size: 16px;">
            <tr>
                <td style="padding: 10px; text-align: left; font-weight: bold;">Ch·∫•t li·ªáu:</td>
                <td style="padding: 10px; text-align: left;">B·∫°c nguy√™n ch·∫•t (99,9% b·∫°c)</td>
            </tr>
            <tr>
                <td style="padding: 10px; text-align: left; font-weight: bold;">Thi·∫øt k·∫ø:</td>
                <td style="padding: 10px; text-align: left;">Tr√≤n ƒë·ªÅu, b·∫£n v·ª´a, bo c·∫°nh m·ªÅm ‚Äì d·ªÖ ph·ªëi ƒë·ªì, kh√¥ng k√©n tay.</td>
            </tr>
            <tr>
                <td style="padding: 10px; text-align: left; font-weight: bold;">Ph√π h·ª£p v·ªõi:</td>
                <td style="padding: 10px; text-align: left;">Ng∆∞·ªùi theo ƒëu·ªïi phong c√°ch t·ªëi gi·∫£n, thanh l·ªãch; l√†m qu√† t·∫∑ng √Ω nghƒ©a cho ng∆∞·ªùi th√¢n y√™u.</td>
            </tr>
        </table>

        <h3 style="color: #333; font-size: 20px; margin-top: 20px;">Th√¥ng Tin Chi Ti·∫øt S·∫£n Ph·∫©m</h3>
        <ul style="font-size: 16px; line-height: 1.6; text-align: left;">
            <li><b>T√™n s·∫£n ph·∫©m:</b> V√≤ng Tay B·∫°c S999 Nguy·ªát Quang Nguy√™n Ch·∫•t - Sunday</li>
            <li><b>Ch·∫•t li·ªáu:</b> B·∫°c chu·∫©n S999</li>
            <li><b>Style:</b> Unisex - nam n·ªØ ƒë·ªÅu ph√π h·ª£p</li>
            <li><b>C√¢n n·∫∑ng:</b> 27-30g t√πy size</li>
            <li><b>H√¨nh th·ª©c ƒë√≥ng g√≥i:</b>
                <ul>
                    <li>üéÅ S·∫£n ph·∫©m</li>
                    <li>üì¶ H·ªôp gi·∫•y mout ƒëen c√≥ kh·∫Øc th∆∞∆°ng hi·ªáu Sunday k√®m card h∆∞·ªõng d·∫´n b·∫£o qu·∫£n trang s·ª©c b·∫°c</li>
                    <li>üßº T·∫∑ng k√®m khƒÉn lau b·∫°c cao c·∫•p v√† d≈©a b·∫°c 2cmx6cm nh√† Sunday cho ƒë∆°n h√†ng t·ª´ <b>300.000 VND</b></li>
                    <li>üß¥ T·∫∑ng k√®m khƒÉn lau b·∫°c cao c·∫•p v√† n∆∞·ªõc r·ª≠a b·∫°c 15ml nh√† Sunday cho ƒë∆°n h√†ng t·ª´ <b>500.000 VND</b> tr·ªü l√™n</li>
                    <li>üíå Card thank you</li>
                </ul>
            </li>
        </ul>

        <hr style="border: 1px solid #d4af37; margin: 20px 0;">

        <h2 style="color: #d4af37; font-size: 22px;">üìå L∆∞u √ù Khi S·ª≠ D·ª•ng B·∫°c T·∫°i NgocStore</h2>
        <p style="font-size: 16px; line-height: 1.6; text-align: left;">
            ‚úÖ Sunday cam k·∫øt to√†n b·ªô s·∫£n ph·∫©m ƒë·ªÅu l√† <b>b·∫°c S925/S999 th·∫≠t</b>, v√¨ v·∫≠y b·∫°n c√≥ th·ªÉ d·ªÖ d√†ng ƒë√°nh b√≥ng l√†m s√°ng l·∫°i nh∆∞ m·ªõi m√† kh√¥ng lo b·ªã ƒëen hay g·ªâ ra ten. Trang s·ª©c b·∫°c S925/S999 gi·ªØ ƒë∆∞·ª£c ƒë·ªô b·ªÅn v√† v·∫ª ƒë·∫πp l√¢u d√†i, l√† l·ª±a ch·ªçn ho√†n h·∫£o cho nh·ªØng ai mu·ªën s·ªü h·ªØu m√≥n trang s·ª©c v·ª´a sang tr·ªçng, v·ª´a c√≥ gi√° tr·ªã s·ª≠ d·ª•ng b·ªÅn b·ªâ theo th·ªùi gian.
        </p>
        <p style="font-size: 16px; line-height: 1.6; text-align: left;">
            ‚ö†Ô∏è <b>Tr√°nh c√°c h√≥a ch·∫•t</b> nh∆∞ l∆∞u hu·ª≥nh, n∆∞·ªõc bi·ªÉn, keo x·ªãt t√≥c, kem ch·ªëng n·∫Øng, ch·∫•t t·∫©y, c·ªìn, axeton‚Ä¶ khi·∫øn b·∫°c s·∫Ω b·ªã gi·∫£m ƒë·ªô b·ªÅn v√† kh√¥ng th·ªÉ gi·ªØ ƒë·ªô s√°ng b√≥ng n·ªØa, v√¨ c√°c ch·∫•t n√†y c√≥ th·ªÉ g√¢y n√™n c√°c h∆∞ h·∫°i r·∫•t kh√≥ x·ª≠ l√Ω.
        </p>
        <p style="font-size: 16px; line-height: 1.6; text-align: left;">
            üíé <b>ƒê·ªëi v·ªõi trang s·ª©c ƒë√≠nh ƒë√°:</b> Qu√Ω kh√°ch vui l√≤ng h·∫°n ch·∫ø va ch·∫°m m·∫°nh, tr√°nh ma s√°t ƒë·ªÉ g√¢y tr·∫ßy x∆∞·ªõc tr√™n s·∫£n ph·∫©m v√† ·∫£nh h∆∞·ªüng ƒë·∫øn ƒë·ªô b·ªÅn c·ªßa s·∫£n ph·∫©m.
        </p>
        <p style="font-size: 16px; line-height: 1.6; text-align: left;">
            üßº <b>V·ªá sinh:</b> S·ª≠ d·ª•ng khƒÉn lau b·∫°c shop t·∫∑ng, ho·∫∑c chat v·ªõi shop ƒë·ªÉ ƒë∆∞·ª£c h∆∞·ªõng d·∫´n m·ªçi l√∫c.
        </p>
        <p style="font-size: 16px; line-height: 1.6; text-align: left;">
            üì¶ <b>B·∫£o qu·∫£n:</b> Khi kh√¥ng ƒëeo ho·∫∑c √≠t ƒëeo, h√£y r·ª≠a s·∫°ch h∆°i m·ªì h√¥i, b·∫£o qu·∫£n trong t√∫i ZIP shop k√®m theo, ƒë·∫£m b·∫£o k√≠n h∆°i k√≠n gi√≥. Tuy·ªát ƒë·ªëi kh√¥ng ƒë·ªÉ ·ªü ngo√†i k·ªÉ c·∫£ trong h·ªôp ƒë·ª±ng k√≠n.
        </p>

        <h3 style="color: #2e8b57; font-size: 18px; margin-top: 20px;">* L∆∞u √Ω ƒë·∫∑c bi·ªát:</h3>
        <p style="font-size: 16px; line-height: 1.6; text-align: left;">
            üìπ Kh√°ch h√†ng n√™n quay l·∫°i qu√° tr√¨nh m·ªü ki·ªán h√†ng v·∫≠n chuy·ªÉn ƒë·ªÉ thu·∫≠n ti·ªán h∆°n trong qu√° tr√¨nh ƒë·ªïi, tr·∫£ h√†ng n·∫øu c√≥ sai s√≥t ·ªü s·∫£n ph·∫©m.
        </p>
    </div>
                  <%- product.description %>
               </div>
               <div class="col-md-12">
                  <h4 style="text-align:center;">S·∫£n ph·∫©m li√™n quan</h4>
               </div>
               <% for ( let item of productList) { %>
               <div class="col-sm-6 col-md-4 col-lg-4">
                  <div class="box">
                     <div class="option_container">
                        <div class="options">
                           <a href="/product_details/<%=item.id%>" class="option1">
                            <%= item.title%>
                           </a>
                           <form action="/add_cart/<%=item.id%>" method="POST">
                              <input type="number" name="quantity" value="1" min="1" style="width:100px;" hidden>
                              <input type="submit" value="Mua ngay" class="option2" style="border-radius: 30px;">
                           </form>
                        </div>
                     </div>
                     <div class="img-box">
                        <img src="<%=item.image%>" alt="">
                     </div>
                     <div class="detail-box">
                        <h5>
                            <%=item.title%>
                        </h5>

                        <% if(item.discount_price > 0) {%>
                        <h6 style="color:red;">
                        Gi·∫£m gi√°</br>
                        <%= numberFormat(item.discount_price)%>
                        </h6>
                        
                        <h6 style="text-decoration:line-through;">
                        Gi√° g·ªëc</br>
                        <%= numberFormat(item.price)%>
                        </h6>
                        <% } else {%>

                        <h6>
                        Gi√°</br>
                        <%= item.price%>
                        </h6>

                        <% } %>
                     </div>
                  </div>
               </div>
               <% } %>

            </div>
         </div>
      </section>

   </div>

   <!-- end client section -->
   <!-- comment section -->
   <%- include('comment_reply') %>
   <!-- end comment section -->
   <!-- footer start -->
   <%- include('footer') %>
   <!-- footer end -->
</body>

<script type="text/javascript">
   function addToCart() {
      event.preventDefault();
      var quantity = document.querySelector('[name=quantity]').value;
      var productId = '<%= product._id %>';
      var xhr = new XMLHttpRequest();
      xhr.open("POST", "/add_cart/" + productId, true);
      xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
      xhr.onreadystatechange = function() {
         if (this.readyState == 4 && this.status == 200) {
            event.preventDefault();
            Swal.fire({
               title: 'Th√™m s·∫£n ph·∫©m th√†nh c√¥ng!',
               icon: 'success',
               confirmButtonText: 'ƒê·ªìng √Ω'
            }).then((result) => {
               if (result.isConfirmed) {
                  window.location.reload();
               }
            });
         }
      };
      xhr.send("quantity=" + quantity);
   }

   function addMoreCart(delta) {
      event.preventDefault(); // NgƒÉn ch·∫∑n h√†nh ƒë·ªông m·∫∑c ƒë·ªãnh
      var num = parseInt(document.querySelector('[name=quantity]').value);
      num += delta;
      if (num < 1) num = 1;
      document.querySelector('[name=quantity]').value = num;
   }


   function fixCartNum() {
      $('[name=quantity]').val(Math.abs($('[name=quantity]').val()));
   }

   function checkQuantity() {
      Swal.fire({
         title: 'Xin l·ªói üò≠üò≠üò≠!',
         text: 'S·ªë l∆∞·ª£ng s·∫£n ph·∫©m kh√¥ng ƒë·ªß ƒë·ªÉ ƒë√°p ·ª©ng y√™u c·∫ßu c·ªßa b·∫°n!',
         icon: 'warning',
         confirmButtonText: 'ƒê·ªìng √Ω',
      })
   }

   function handleAddToCart(button) {
    var productQuantity = parseInt(button.getAttribute('data-product-quantity'));
    var requestedQuantity = parseInt(document.querySelector('[name=quantity]').value);

      if (requestedQuantity > productQuantity) {
         // Hi·ªÉn th·ªã th√¥ng b√°o n·∫øu s·ªë l∆∞·ª£ng y√™u c·∫ßu l·ªõn h∆°n s·ªë l∆∞·ª£ng c√≥ s·∫µn
         checkQuantity();
      } else {
         // Th√™m v√†o gi·ªè h√†ng n·∫øu s·ªë l∆∞·ª£ng ƒë·ªß
         addToCart();
      }
   }

   function Favorite() {
      Swal.fire({
         title: 'Th√™m th√†nh c√¥ng',
         text: 'S·∫£n ph·∫©m ƒë√£ ƒë∆∞·ª£c th√™m v√†o danh s√°ch y√™u th√≠ch!',
         icon: 'success',
         confirmButtonText: 'ƒê·ªìng √Ω',
      })
   }

   function checkFavorite() {
      Swal.fire({
         title: 'Kh√¥ng th√†nh c√¥ng',
         text: 'B·∫°n ƒë√£ th√™m s·∫£n ph·∫©m n√†y v√†o danh s√°ch y√™u th√≠ch tr∆∞·ªõc ƒë√≥!',
         icon: 'warning',
         confirmButtonText: 'ƒê·ªìng √Ω',
      })
   }

</script>

</html>