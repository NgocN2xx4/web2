<!DOCTYPE html>
<html>
<head>
   <base href="/public">
   <%- include('css') %>
   <script src="dist/sweetalert.min.js"></script>
   <link rel="stylesheet" type="text/css" href="dist/sweetalert.css">
   <style>
      .evaluate{
         margin-left: 20px; 
         border-left: solid #dad7d7 1px; 
         font-size: 13pt; 
         padding-top: 3px; 
         padding-left: 20px;
      }
      .btnAdd{
         margin-top: 20px; 
         width: 100%; 
         font-size: 30px;
      }
      .card-inner {
        margin-left: 4rem;
      }

      .img-account-profile {
        height: 10rem;
        border: 1px solid #000;
        border-radius: 50%;
        height: 150px;
        width: 150px;
      }
      @media(max-width:380px) {
         .fillComment {
            height: 10px;
            width: 70vw;
         }

         .allComment {
            padding-left: 20%;
            font-size: 20px;
         }
         .evaluate{
            margin-left: 5px;
            font-size: 9pt;
            padding-left: 6px;
         }
         .bi-star-fill, .fa-star{
            height: 12px;
            width: 12px;
         }
         .btnAdd{
            font-size:20px;
         }
         .img-account-profile{
            height: 100px;
            width: 100px;
         }
         p strong{
            font-size: 15px;
         }
         .card-inner {
            margin-left: 2rem;
         }
      }
   </style>
</head>

<body>
   <div class="hero_area">
    <%- include('header') %>

      <section class="product_section layout_padding">
         <div class="container">
            <div class="row">
               <div class="col-md-6 text-center">
                  <div class="border rounded-4 mb-3 d-flex justify-content-center">
                       <img style="max-width: 100%; max-height: 60vh; margin: auto;" class="rounded-4 fit" src="<%= product.image %>" />
                   </div>
               </div>
               <div class="col-md-6">
                  <h3><%= product.title %></h3>
                  <!-- show 5 stars -->
                  <ul style="display: flex; list-style-type: none; margin: 0px; padding: 0px;">
                     <li style="color: orange; font-size: 13pt; padding-top: 2px; margin-right: 5px;" class="evaluate">5.0</li>
                     <% for(let i = 0; i <5 ; i++) { %>
                     <li style="color: orange; padding: 2px;">
                              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                 class="bi bi-star-fill" viewBox="0 0 16 16">
                                 <path
                                    d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z">
                                 </path>
                              </svg>
                    </li>
                     <% } %>

                     <li class="evaluate">
                        <%= replies.length+comments.length%> ƒê√°nh gi√°
                     </li>
                     <li class="evaluate">
                        <%= orders.length%> ƒê√£ b√°n
                     </li>
                  </ul>
                  <p style="color: red; font-size: 30px; margin-top: 15px; margin-bottom: 15px;">
                    <%= (product.discount_price > 0) ? numberFormat(product.discount_price) : numberFormat(product.price) %> VND</p>
                  <p
                     style="color: grey; font-size: 15px; margin-top: 15px; margin-bottom: 15px; text-decoration: line-through;">
                     <del><%= numberFormat(product.price) %> VND</del>
                  </p>
                  <div class="d-flex flex-container">
                     <form id="quantity-form" style="display:inline-block;" action="/add_cart/<%= product._id%>" method="POST" ></form>
                     <div>
                        <button class="btn btn-light" style="border: 1px solid #e0dede; border-radius: 0px;"
                           onclick="addMoreCart(-1)">-</button>
                     </div>
                     <div>
                           <input type="number" name="quantity" class="form-control" step=1 value="1" style="max-width:70px; 
            border: 1px solid #e0dede; border-radius: 0px; text-align: center;" onchange="fixCartNum()">
                     </div>
                     <div>
                        <button class="btn btn-light" style="border: 1px solid #e0dede; border-radius: 0px;"
                           onclick="addMoreCart(1)">+</button>
                     </div>
                     <div>
                        <p style="margin: 8px 0px 10px 10px;"><strong>Number</strong>: <% if(product.quantity > 0) { %> <%= product.quantity%> products <% }else { %><label style="color: red; font-weight: 500;">Out of stock</label><%}%></p>
                    </div>
                  </div>
                  <button class="btn btn-success btnAdd" 
                        <% if(token != null) { %>
                        data-product-quantity="<%= product.quantity %>" onclick="handleAddToCart(this)">
                        <% } else { %>
                        onclick="checkToken()">
                        <% } %>
                     <i class="bi bi-cart4"></i> Th√™m v√†o gi·ªè h√†ng
                  </button>
                  </form>
                     <button class="btn btn-secondary btnAdd" disabled
                     style="background: #edebeb; border: none; color: #000;">
                     <i class="bi bi-bookmark-heart-fill"></i> ƒê√£ y√™u th√≠ch</button>
               </div>
               <div class="col-md-12" style="margin-top: 50px;">
                  <h4>M·ªôt v√†i ƒëi·ªÅu v·ªÅ NgocStore :</h4>
                  <div style="text-align: center; padding: 20px; background-color: #fff; border: 2px solid #d4af37; border-radius: 10px;">
        <h1 style="color: #d4af37; font-size: 28px; text-transform: uppercase;">‚ú® V·ªÅ NgocStore ‚ú®</h1>
        <p style="font-size: 16px; line-height: 1.6;">
            Ch√†o m·ª´ng b·∫°n ƒë·∫øn v·ªõi <b>NgocStore</b> ‚Äì ƒëi·ªÉm ƒë·∫øn tin c·∫≠y d√†nh cho nh·ªØng t√≠n ƒë·ªì y√™u th√≠ch trang s·ª©c b·∫°c cao c·∫•p! Ch√∫ng t√¥i t·ª± h√†o l√† ƒë∆°n v·ªã chuy√™n cung c·∫•p c√°c s·∫£n ph·∫©m l√†m t·ª´ <b>b·∫°c 999 nguy√™n ch·∫•t</b>, ƒë·∫£m b·∫£o ch·∫•t l∆∞·ª£ng v∆∞·ª£t tr·ªôi v√† ƒë·ªô b·ªÅn ƒë·∫πp theo th·ªùi gian.
        </p>

        <h2 style="color: #2e8b57; font-size: 22px; margin-top: 20px;">üåü Ch·∫•t L∆∞·ª£ng ƒê·ªânh Cao</h2>
        <p style="font-size: 16px; line-height: 1.6;">
            T·∫•t c·∫£ s·∫£n ph·∫©m t·∫°i NgocStore ƒë·ªÅu ƒë∆∞·ª£c ch·∫ø t√°c t·ª´ <b>b·∫°c 999</b> ‚Äì lo·∫°i b·∫°c tinh khi·∫øt nh·∫•t, mang l·∫°i ƒë·ªô s√°ng b√≥ng ho√†n h·∫£o v√† kh√¥ng g√¢y k√≠ch ·ª©ng da. M·ªói m√≥n trang s·ª©c l√† s·ª± k·∫øt h·ª£p gi·ªØa b√†n tay t√†i hoa c·ªßa c√°c ngh·ªá nh√¢n v√† c√¥ng ngh·ªá ch·∫ø t√°c hi·ªán ƒë·∫°i, ƒë·∫£m b·∫£o t·ª´ng chi ti·∫øt ƒë·ªÅu tinh x·∫£o v√† ƒë·∫≥ng c·∫•p.
        </p>

        <h2 style="color: #2e8b57; font-size: 22px; margin-top: 20px;">üåü Uy T√≠n H√†ng ƒê·∫ßu</h2>
        <p style="font-size: 16px; line-height: 1.6;">
            V·ªõi ph∆∞∆°ng ch√¢m <b>‚ÄúCh·∫•t l∆∞·ª£ng t·∫°o n√™n th∆∞∆°ng hi·ªáu‚Äù</b>, NgocStore cam k·∫øt mang ƒë·∫øn cho kh√°ch h√†ng nh·ªØng s·∫£n ph·∫©m ƒë√∫ng chu·∫©n, k√®m theo d·ªãch v·ª• t·∫≠n t√¢m. Ch√∫ng t√¥i cung c·∫•p ch√≠nh s√°ch b·∫£o h√†nh r√µ r√†ng, h·ªó tr·ª£ ƒë·ªïi tr·∫£ minh b·∫°ch v√† t∆∞ v·∫•n nhi·ªát t√¨nh ƒë·ªÉ ƒë·∫£m b·∫£o tr·∫£i nghi·ªám mua s·∫Øm tuy·ªát v·ªùi nh·∫•t.
        </p>

        <h3 style="color: #333; font-size: 20px; margin-top: 20px;">T·∫°i Sao Ch·ªçn NgocStore?</h3>
        <ul style="font-size: 16px; line-height: 1.6; text-align: left;">
            <li><b>Ch·∫•t li·ªáu cao c·∫•p:</b> 100% b·∫°c 999 nguy√™n ch·∫•t, an to√†n v√† th√¢n thi·ªán v·ªõi m·ªçi lo·∫°i da.</li>
            <li><b>Thi·∫øt k·∫ø tinh t·∫ø:</b> ƒêa d·∫°ng m·∫´u m√£, t·ª´ phong c√°ch t·ªëi gi·∫£n ƒë·∫øn sang tr·ªçng, ph√π h·ª£p cho c·∫£ nam v√† n·ªØ.</li>
            <li><b>Gi√° tr·ªã phong th·ªßy:</b> Trang s·ª©c b·∫°c t·∫°i NgocStore kh√¥ng ch·ªâ l√† ph·ª• ki·ªán m√† c√≤n mang √Ω nghƒ©a may m·∫Øn, b√¨nh an.</li>
            <li><b>D·ªãch v·ª• chuy√™n nghi·ªáp:</b> ƒê·ªôi ng≈© t∆∞ v·∫•n t·∫≠n t√¢m, giao h√†ng nhanh ch√≥ng, ƒë√≥ng g√≥i c·∫©n th·∫≠n.</li>
            <li><b>Qu√† t·∫∑ng √Ω nghƒ©a:</b> M·ªói s·∫£n ph·∫©m ƒëi k√®m h·ªôp ƒë·ª±ng sang tr·ªçng v√† ph·ª• ki·ªán b·∫£o qu·∫£n, l√Ω t∆∞·ªüng ƒë·ªÉ l√†m qu√† t·∫∑ng.</li>
        </ul>

        <hr style="border: 1px solid #d4af37; margin: 20px 0;">

        <h2 style="color: #d4af37; font-size: 22px;">üìç NgocStore - ƒê·ªãa Ch·ªâ Uy T√≠n</h2>
        <p style="font-size: 16px; line-height: 1.6; text-align: left;">
            NgocStore t·ª± h√†o l√† c·ª≠a h√†ng chuy√™n cung c·∫•p trang s·ª©c b·∫°c cao c·∫•p, ƒë·∫∑t t·∫°i <b>68 Nguy·ªÖn Ch√≠ Thanh, ƒê·ªëng ƒêa, H√† N·ªôi</b> ‚Äì trung t√¢m s·∫ßm u·∫•t, d·ªÖ d√†ng ti·∫øp c·∫≠n cho kh√°ch h√†ng t·∫°i khu v·ª±c mi·ªÅn B·∫Øc. H√£y gh√© thƒÉm c·ª≠a h√†ng c·ªßa ch√∫ng t√¥i ƒë·ªÉ tr·∫£i nghi·ªám tr·ª±c ti·∫øp c√°c s·∫£n ph·∫©m ƒë·ªôc ƒë√°o v√† nh·∫≠n t∆∞ v·∫•n t·∫≠n t√¨nh t·ª´ ƒë·ªôi ng≈© chuy√™n nghi·ªáp!
        </p>
        <div style="width: 100%; height: 300px; margin: 20px 0;">
            <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d1489.0646035894938!2d105.80416532852915!3d21.01897992664345!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3135ab3f6e8f2c8b%3A0x9e6b8a5d6f6f9c!2zNjggTmd1eeG7hW4gQ2jhu4MgVGhhbmgsIELDrG5gIMSQaeG7h24sIEjDoCBO4buZaSwgVmnhu4d0IE5hbQ!5e0!3m2!1svi!2s!4v1690263551234!5m2!1svi!2s" width="100%" height="300" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
        </div>

        <h2 style="color: #d4af37; font-size: 22px;">üìå H∆∞·ªõng D·∫´n B·∫£o Qu·∫£n Trang S·ª©c B·∫°c</h2>
        <p style="font-size: 16px; line-height: 1.6; text-align: left;">
            ‚úÖ <b>Cam k·∫øt ch·∫•t l∆∞·ª£ng:</b> S·∫£n ph·∫©m t·∫°i NgocStore l√† b·∫°c 999 th·∫≠t, d·ªÖ d√†ng ƒë√°nh b√≥ng ƒë·ªÉ lu√¥n s√°ng ƒë·∫πp nh∆∞ m·ªõi. ƒê·ªô b·ªÅn cao, kh√¥ng lo ƒëen hay g·ªâ s√©t.
        </p>
        <p style="font-size: 16px; line-height: 1.6; text-align: left;">
            ‚ö†Ô∏è <b>Tr√°nh h√≥a ch·∫•t:</b> H·∫°n ch·∫ø ti·∫øp x√∫c v·ªõi l∆∞u hu·ª≥nh, n∆∞·ªõc bi·ªÉn, keo x·ªãt t√≥c, ch·∫•t t·∫©y, c·ªìn, axeton‚Ä¶ ƒë·ªÉ gi·ªØ ƒë·ªô s√°ng b√≥ng v√† ƒë·ªô b·ªÅn c·ªßa b·∫°c.
        </p>
        <p style="font-size: 16px; line-height: 1.6; text-align: left;">
            üíé <b>ƒê·ªëi v·ªõi trang s·ª©c ƒë√≠nh ƒë√°:</b> Tr√°nh va ch·∫°m m·∫°nh ho·∫∑c ma s√°t ƒë·ªÉ kh√¥ng l√†m tr·∫ßy x∆∞·ªõc ho·∫∑c ·∫£nh h∆∞·ªüng ƒë·∫øn ƒë√° qu√Ω.
        </p>
        <p style="font-size: 16px; line-height: 1.6; text-align: left;">
            üßº <b>V·ªá sinh:</b> S·ª≠ d·ª•ng khƒÉn lau b·∫°c chuy√™n d·ª•ng (t·∫∑ng k√®m) ho·∫∑c li√™n h·ªá NgocStore ƒë·ªÉ ƒë∆∞·ª£c h∆∞·ªõng d·∫´n chi ti·∫øt.
        </p>
        <p style="font-size: 16px; line-height: 1.6; text-align: left;">
            üì¶ <b>B·∫£o qu·∫£n:</b> Khi kh√¥ng s·ª≠ d·ª•ng, r·ª≠a s·∫°ch m·ªì h√¥i, c·∫•t trong t√∫i ZIP k√≠n h∆°i ƒë·ªÉ gi·ªØ s·∫£n ph·∫©m lu√¥n nh∆∞ m·ªõi.
        </p>

        <h3 style="color: #2e8b57; font-size: 18px; margin-top: 20px;">* L∆∞u √Ω ƒë·∫∑c bi·ªát:</h3>
        <p style="font-size: 16px; line-height: 1.6; text-align: left;">
            üìπ Kh√°ch h√†ng n√™n quay l·∫°i qu√° tr√¨nh m·ªü ki·ªán h√†ng v·∫≠n chuy·ªÉn ƒë·ªÉ thu·∫≠n ti·ªán h∆°n trong qu√° tr√¨nh ƒë·ªïi, tr·∫£ h√†ng n·∫øu c√≥ sai s√≥t ·ªü s·∫£n ph·∫©m.
        </p>
    </div>
                  <%- product.description %>
               </div>
               <div class="col-md-12">
                  <h4 style="text-align:center;">S·∫£n ph·∫©m li√™n quan</h4>
               </div>
               <% for ( let item of productList) { %>
               <div class="col-sm-6 col-md-4 col-lg-4">
                  <div class="box">
                     <div class="option_container">
                        <div class="options">
                           <a href="/product_details/<%=item.id%>" class="option1">
                            <%= item.title%>
                           </a>
                           <form action="/add_cart/<%=item.id%>" method="POST">
                              <input type="number" name="quantity" value="1" min="1" style="width:100px;" hidden>
                              <input type="submit" value="Mua ngay" class="option2" style="border-radius: 30px;">
                           </form>
                        </div>
                     </div>
                     <div class="img-box">
                        <img src="<%=item.image%>" alt="">
                     </div>
                     <div class="detail-box">
                        <h5>
                            <%=item.title%>
                        </h5>

                        <% if(item.discount_price > 0) {%>
                        <h6 style="color:red;">
                        Gi·∫£m gi√°</br>
                        <%= numberFormat(item.discount_price)%>
                        </h6>
                        
                        <h6 style="text-decoration:line-through;">
                        Gi√° g·ªëc</br>
                        <%= numberFormat(item.price)%>
                        </h6>
                        <% } else {%>

                        <h6>
                        Gi√°</br>
                        <%= item.price%>
                        </h6>

                        <% } %>
                     </div>
                  </div>
               </div>
               <% } %>

            </div>
         </div>
      </section>

   </div>

   <!-- end client section -->
   <!-- comment section -->
   <%- include('comment_reply') %>
   <!-- end comment section -->
   <!-- footer start -->
   <%- include('footer') %>
   <!-- footer end -->
</body>

<script type="text/javascript">
   function addToCart() {
      event.preventDefault();
      var quantity = document.querySelector('[name=quantity]').value;
      var productId = '<%= product._id %>';
      var xhr = new XMLHttpRequest();
      xhr.open("POST", "/add_cart/" + productId, true);
      xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
      xhr.onreadystatechange = function() {
         if (this.readyState == 4 && this.status == 200) {
            event.preventDefault();
            Swal.fire({
               title: 'Th√™m s·∫£n ph·∫©m th√†nh c√¥ng!',
               icon: 'success',
               confirmButtonText: 'ƒê·ªìng √Ω'
            }).then((result) => {
               if (result.isConfirmed) {
                  window.location.reload();
               }
            });
         }
      };
      xhr.send("quantity=" + quantity);
   }

   function addMoreCart(delta) {
      event.preventDefault(); // NgƒÉn ch·∫∑n h√†nh ƒë·ªông m·∫∑c ƒë·ªãnh
      var num = parseInt(document.querySelector('[name=quantity]').value);
      num += delta;
      if (num < 1) num = 1;
      document.querySelector('[name=quantity]').value = num;
   }

   function fixCartNum() {
      $('[name=quantity]').val(Math.abs($('[name=quantity]').val()));
   }

   function checkQuantity() {
      Swal.fire({
         title: 'Xin l·ªói üò≠üò≠üò≠!',
         text: 'S·ªë l∆∞·ª£ng s·∫£n ph·∫©m kh√¥ng ƒë·ªß ƒë·ªÉ ƒë√°p ·ª©ng y√™u c·∫ßu c·ªßa b·∫°n!',
         icon: 'warning',
         confirmButtonText: 'ƒê·ªìng √Ω',
      })
   }

   function handleAddToCart(button) {
    var productQuantity = parseInt(button.getAttribute('data-product-quantity'));
    var requestedQuantity = parseInt(document.querySelector('[name=quantity]').value);

      if (requestedQuantity > productQuantity) {
         // Hi·ªÉn th·ªã th√¥ng b√°o n·∫øu s·ªë l∆∞·ª£ng y√™u c·∫ßu l·ªõn h∆°n s·ªë l∆∞·ª£ng c√≥ s·∫µn
         checkQuantity();
      } else {
         // Th√™m v√†o gi·ªè h√†ng n·∫øu s·ªë l∆∞·ª£ng ƒë·ªß
         addToCart();
      }
   }

   function Favorite() {
      Swal.fire({
         title: 'Th√™m th√†nh c√¥ng',
         text: 'S·∫£n ph·∫©m ƒë√£ ƒë∆∞·ª£c th√™m v√†o danh s√°ch y√™u th√≠ch!',
         icon: 'success',
         confirmButtonText: 'ƒê·ªìng √Ω',
      })
   }

   function checkFavorite() {
      Swal.fire({
         title: 'Kh√¥ng th√†nh c√¥ng',
         text: 'B·∫°n ƒë√£ th√™m s·∫£n ph·∫©m n√†y v√†o danh s√°ch y√™u th√≠ch tr∆∞·ªõc ƒë√≥!',
         icon: 'warning',
         confirmButtonText: 'ƒê·ªìng √Ω',
      })
   }

</script>

</html>